---
date: 2017-03-27T12:51:44+01:00
title: Tyk Gateway Configuration Options
menu:
  main:
    parent: "Tyk Configuration Reference"
weight: 1
---

## Tyk Gateway Configuration

The Tyk Gateway server is configured primarily via the `tyk.conf` file, this file resides in `/opt/tyk-gateway` on most systems, but can also live anywhere and be directly targeted with the `--conf` flag.

### Environment Variables

Environment variables can be used to override the settings defined in the configuration file. See [Environment Variables](/docs/tyk-configuration-reference/environment-variables/) for details. Where an environment variable is specified, its value will take precedence over the value in the configuration file.

### tyk lint

In **v2.4** we have added a new `tyk lint` command which will validate your `tyk.conf` file and validate it for syntax correctness, misspelled attribute names or format of values. The Syntax can be:

`tyk lint` or `tyk --conf=path lint`

If `--conf` is not used, the first of the following paths to exist is used:

`./tyk.conf`
`/etc/tyk/tyk.conf`

### listen_port

Setting this value will change the port that Tyk listens on, by default Tyk will try to listen on port 8080.

### node_secret

The shared secret between the Gateway and the Dashboard to ensure that API Definition downloads, heartbeat and Policy loads are from a valid source.

### secret

This should be changed as soon as Tyk is installed on the system. This value is used in every interaction with the Tyk REST API, it should be passed along as the `X-Tyk-Authorization` header in any requests made. Tyk assumes that you are sensible enough not to expose the management endpoints to the public and to keep this configuration value to yourself.

### template_path

This is the path to the Tyk templates, as of the current version there is only one template `error.json` which determines the output of any errors that are returned by Tyk to any clients attempting to connect (with the exception of the OAuth flow, which has hard-coded templates).

### app_path

If Tyk is being used in its standard configuration (CE Mode), then API definitions are stored in the apps folder (by default in `/opt/tyk-gateway/apps`). This file is scanned for files that ending in `.json` extension and interpreted at startup or reload. See the API Management section of the [Tyk Gateway API](/docs/tyk-gateway-api/) for more details.

### hash_keys

Set this value to `true` to enable key hashing, this will start hashing all keys that are generated by Tyk in Redis. Enabling this means that keys that are created are only exposed once, during creation. If the key is lost or misplaced after this it will not be retrievable (however its hash can still be deleted, if known).

If this is set to `true`, the same value should be enabled in the Dashboard configuration so that the UI can react appropriately.

### enable_hashed_keys_listing

Set to `false` by default, set this to `true` to enable the retrieval all (or per API) key hash listings.

### enable_update_key_by_hash

Available from **v2.8**, this setting allows you to update keys with just its hash value. Set to `false` by default.

{{< note success >}}
**Note**  

This setting applies to On-Premises and MDCB installations only.
{{< /note >}}


### enable_delete_key_by_hash

Available from **v2.8**, this setting allows you to delete keys with just its hash value. Set to `false` by default.

{{< note success >}}
**Note**  

This setting applies to On-Premises and MDCB installations only.
{{< /note >}}



### allow_master_keys

If this value is set to `true`, session objects (key definitions) that do not have explicit access rights set will be allowed by Tyk. This means that keys that are created have access to ALL APIs, which in many cases is unwanted behaviour unless you are sure about what you are doing.

### min_key_length

This allows you to set a minimum key length for Authorisation key requests. Any request containing less than the minimum length will automatically rejected. The default setting is `3`.

### use_db_app_configs

If you are a Tyk Pro user, this option will enable polling the Dashboard service for API definitions. On startup Tyk will attempt to connect and download any relevant application configurations from from a Dashboard instance. The documents are exactly the same as the JSON configuration on disk with the exception of a BSON ID supplied by the service.

### db_app_conf_options

This section defines API loading and shard options, enable these settings to only selectively load API definitions on a node from a Dashboard service.

#### db_app_conf_options.connection_string

Set the URL to your Dashboard instance (or a load balanced instance), the URL should take the form of: `http://dashboard_host:port`

{{< note success >}}
**Note**  

The same will need to be done for Policy loading, see the policies section below.
{{< /note >}}



#### db_app_conf_options.node_is_segmented

Set to `true` to enable filtering (sharding) of APIs.

{{< note success >}}
**Note**  

If you set to `true` for multiple gateway nodes, you should ensure that `management_node` is set to `false`. This is to ensure visibility for the management node across all APIs.
{{< /note >}}


#### db_app_conf_options.tags

The tags to use when filtering (sharding) Tyk Gateway nodes, tags are processed as OR operations. If you include a non-filter tag (e.g. an identifier such as `node-id-1`, this will become available to your analytics Dashboard).

### storage

This section of the configuration is to hold the Redis configuration.

#### storage.type

This should be set to `"redis"` (lowercase), the previous backup and testing option of `csv` is deprecated.

#### storage.host

The Redis host, by default this is set to `localhost`, but for production this should be set to a cluster.

#### storage.port

The Redis instance port.

#### storage.password

If your Redis instance has a password set for access, you can tell Tyk about it here.

#### storage.timeout

Set cutom timeout for Redis network operations. Default value 5 seconds.

#### storage.optimisation_max_idle

Set the number of maximum idle connections in the Redis connection pool, defaults to 100, set to higher if expecting more traffic.

#### storage.use_ssl

Enable SSL/TLS connection between Tyk Gateway &amp; Redis.

#### enable_analytics

Tyk is capable of recording every hit to your API into a database with various filtering parameters, set this value to `true` and fill in the sub-section below to enable logging.

{{< note success >}}
**Note**  

For performance reasons, Tyk will store traffic data to Redis initially and then purge the data from Redis to MongoDB or other, [data stores](/docs/analytics-and-reporting/other-data-stores/), on a regular basis as determined by the `purge_delay` setting in your Tyk Pump configuration.
{{< /note >}}


### analytics_config

This section defines options on what analytics data to store.

#### analytics_config.enable_detailed_recording

Set this value to `true` to have Tyk store the inbound request and outbound response data in HTTP Wire format as part of the Analytics data. Please note, this will greatly increase your analytics DB size and can cause performance degradation on analytics processing by the Dashboard. This setting can be overridden with an organisation flag.

Setting `enforce_org_data_detail_logging` in the `tyk.conf` will enforce it (quotas must also be enforced for this to work), then setting `enable_detail_recording` in the org session object will enable or disable the logging method on a per-organisation basis. This can be useful for debugging live APIs.

#### analytics_config.enable_geo_ip and analytics_config.geo_ip_db_path

##### enable_geo_ip

As of Tyk API Gateway 2.0, Tyk can store GeoIP information based on MaxMind DB's, to enable GeoIP tracking on inbound request analytics, set this value to `true` and assign a DB using the `geo_ip_db_path` setting.

Please make sure you have also enabled analytics storing by setting [`enable_analytics`](/docs/tyk-configuration-reference/tyk-gateway-configuration-options/#a-name-enable-analytics-a-enable-analytics) in the Gateway.

##### geo_ip_db_path

Set this value to the absolute path of your MaxMind GeoIP Database file, e.g.: `./GeoLite2-City.mmdb`. The analytics GeoIP DB can be replaced on disk, it will cleanly auto-reload every hour.

Don't forget to mount it in case you use containers.

#### analytics_config.ignored_ips

Adding IP addresses to this list will cause Tyk to ignore these IPs in the analytics data, these IP addresses will not produce an analytics log record. This is useful for health checks and other samplers that might skew usage data. The IP addresses must be provided as a JSON array, with the values being single IPs. CIDR values are not supported.This is useful for health checks and other samplers that might skew usage data.

#### analytics_config.normalise_urls

This section describes methods that enable you to normalise inbound URLs in your analytics so as to have more meaningful per-path data.

#### analytics_config.normalise_urls.enabled

Set this to `true` to enable normalisation.

#### analytics_config.normalise_urls.normalise_uuids

Set this to `true` to have Tyk automatically clean up UUIDs, it will match the following styles:

- `/15873a748894492162c402d67e92283b/search`
- `/CA761232-ED42-11CE-BACD-00AA0057B223/search`
- `/ca761232-ed42-11ce-BAcd-00aa0057b223/search`
- `/ca761232-ed42-11ce-BAcd-00aa0057b223/search`

Each UUID will be replaced with a placeholder `{uuid}`

#### analytics_config.normalise_urls.normalise_numbers

Set this to `true` to have Tyk automatically match for numeric ID's, it will match with a preceding slash so as not to capture actual numbers:

- `/widgets/123456/getParams will become /widgets/{id}/getParams`

#### analytics_config.normalise_urls.custom_patterns

This is a list of custom patterns you can add, these must be valid regex strings, Tyk will replace these values with a `{var}` placeholder.

#### analytics_config.storage_expiration_time

You can set a time (in seconds) to configure how long analytics are kept if they are not processed. The default is 60 seconds. This is used to prevent the potential infinite growth of Redis analytics storage.

{{< note success >}}
**Note**  

This option is available from v2.5.2 onwards.
{{< /note >}}


### policies

The policies section allows you to define where Tyk can find its policy templates. Policy templates are similar to key definitions in that they allow you to set quotas, access rights and rate limits for keys.

Policies are loaded when Tyk starts and if changed require a hot-reload so they are loaded into memory.

A policy can be defined in a file (stand alone mode) or from the same database as the Dashboard.

#### policies.policy_source

Set this value to `file` to look on the file system for a definition file, set to service to use the Dashboard `service`. This value must be set. Note the option for `mongo` has now been removed.

#### policies.policy_connection_string

This option is required if you desire to use `policies.policy_source` as `service`. Set this to the URL of your dashboard installation, the URL should take the form of: `http://dashboard_host:port`.

#### policies.policy_record_name

This option is required if you desire to use `policies.policy_source` as `file`.
Specifies the path of a JSON file containing the available policies.

### policies.allow_explicit_policy_id

In a Pro installation, Tyk will load Policy IDs and use the internal object-ID as the ID of the policy. This is not portable in cases where the data needs to be moved from installation to installation.

If you set this value to `true`, then the `id` parameter in a stored policy (or imported policy using the REST API of the Dashboard), will be used instead of the internal ID.

This option should only be used when transporting an installation to a new database.

### health_check

This section enables the configuration of the health-check API endpoint and the size of the sample data cache (in seconds).

#### health_check.enable_health_checks

Setting this value to `true` will enable the health-check endpoint on `/Tyk/health`.

#### health_check_endpoint_name

From v2.7.5 you can now rename the `/hello` endpoint by using this option.

#### health_check.health_check_value_timeouts

This setting defaults to `60`, this is the time window that Tyk will use to sample health-check data. Increase this value for more accurate data (larger sample period), and decrease for less accurate. The reason this value is configurable is because sample data takes up space in your Redis DB to store the data to calculate samples, on high-availability systems this may not be desirable and smaller values may be preferred.

### http_server_options

Set these options to hard-code values into the way the HTTP server behaves.

```
"http_server_options": {
  "enable_http2": true,
  "override_defaults": false,
  "use_ssl": false,
  "enable_websockets": false,
  "flush_interval": 1,
  "certificates": [
    {
      "domain_name": "ssl.domain.com",
      "cert_file": "./certs/ssl.domain.com.cert",
      "key_file": "./certs/ssl.domain.com.cert.key"
    },
    {
      "domain_name": "cname.domain.com",
      "cert_file": "./certs/cert2/cname.domain.com.cert.cert",
      "key_file": "./certs/cert2/cname.domain.com.key"
    }
  ],
  "ssl_insecure_skip_verify": false
},
```

#### enable_http2

This defaults to true for HTTP/2 connections.

#### http_server_options.use_ssl

Set to `true` to enable SSL connections.

#### http_server_options.certificates

A list of certificates and domains to match against. Please see the SSL section for more detail for this feature.

#### http_server_options.ssl_certificates

Added in v2.4, as altertnative to `http_server_options.certificates`, which supports our [Certificate API](/docs/basic-config-and-security/security/tls-and-ssl/mutual-tls/#a-name-certificates-management-a-certificate-management) format. It should be a list of certificate IDs returned by Certificate API, or paths to certificate in PEM format (including private key).

#### http_server_options.skip_url_cleaning

Setting this option to true will allow the use of a double slash in url path, and can be useful if you need to pass raw URLs to your API endpoints. For example: `http://myapi.com/get/http://example.com`.

#### http_server_options.skip_target_path_escaping

Setting this option to true will disable automatic character escaping, allowing to path original url data to the upstream.

#### http_server_options.flush_interval

Set this to the number of seconds that Tyk should use to flush content from the proxied upstream connection to the open downstream connection. This is usually required for HTTP Streams.

For more resilient connection management, it is suggested to use the `close_connections` option below.

`flush_interval` is set in **milliseconds**.

#### http_server_options.enable_websockets

As of v2.2, Tyk supports transparent websocket connection upgrades, to enable this feature, ensure that this value is set to `true`.

#### http_server_options.ssl_insecure_skip_verify

Allows usage of self-signed certificates when connecting to the Gateway.

#### security.pinned_public_keys

Use this option to map pinned public keys. You need to use the following format:

```
{
  "example.com": "<key-id>",
  "foo.com": "/path/to/pub.pem",
  "*.wild.com": "<key-id>,<key-id-2>"
}
```

For `key-id` you should set the ID returned after you upload the public key using the Certificate API. Additionally, you can just set path to public key, located on your server. You can specify multiple public keys by separating their IDs by a comma. Upstream certificates now also have wildcard domain support

Note that only public keys in PEM format are supported.

{{< note success >}}
**Note**  

This option is available from v2.6.0 onwards.
{{< /note >}}


#### close_connections

Set this value to `true` to force Tyk to close the connection with the client, otherwise the connections will remain open for as long as your OS keeps TCP connections open. This can cause a file-handler limit to be exceeded. Setting to `false` can have performance benefits as the connection can be reused.

Prior to v2.6 this setting controlled the behaviour of both the client/Tyk connection and Tyk/server connection. Since v2.6 it is just for the client/Tyk connection, with Tyk/server being controlled by <a href='#proxy_close_connections'>proxy_close_connections</a>

{{< note success >}}
**Note**  

This option is available from v2.3.5 onwards.
{{< /note >}}

#### proxy_close_connections

Set this value to `true` to force Tyk to close the connection with the server, otherwise the connections will remain open for as long as your OS keeps TCP connections open. This can cause a file-handler limit to be exceeded. Setting to `false` can have performance benefits as the connection can be reused.

> **NOTE:** This option is available from v2.6 onwards.

### monitor

The monitor section is useful if you wish to enforce a global trigger limit on organisation and user quotas. This feature will trigger a webhook event to fire when specific triggers are reached. Triggers can be global (set in the node), by organisation (set in the organisation session object) or by key (set in the key session object).

While Organisation-level and Key-level triggers can be tiered (e.g. trigger at 10%, trigger at 20%, trigger at 80%), in the node-level configuration only a global value can be set. If a global value and specific trigger level are the same the trigger will only fire once:

```
"monitor": {
  "enable_trigger_monitors": true,
  "configuration": {
    "method": "POST",
    "target_path": "http://domain.com/notify/quota-trigger",
    "template_path": "templates/monitor_template.json",
    "header_map": {
      "some-secret": "89787855"
    },
    "event_timeout": 10
  },
  "global_trigger_limit": 80.0,
  "monitor_user_keys": false,
  "monitor_org_keys": true
},
```

#### monitor.enable_trigger_monitors

Set this to `true` to have monitors enabled in your configuration for the node.

#### monitor.configuration.method

The method to use for the webhook.

#### monitor.configuration.target_path

The target path on which to send the request.

#### monitor.configuration.template_path

The template to load in order to format the request.

#### monitor.configuration.header_map

Headers to set when firing the webhook.

#### monitor.configuration.event_timeout

The cool-down for the event so it does not trigger again (in seconds).

#### monitor.global_trigger_limit

The trigger limit, as a percentage of the quota that must be reached in order to trigger the event, any time the quota percentage is increased the event will trigger.

#### monitor.monitor_user_keys

Apply the monitoring subsystem to user keys.

#### monitor.monitor_org_keys

Apply the monitoring subsystem to organisation keys.

### uptime_tests

Tyk nodes can provide uptime awareness, uptime testing and analytics for your underlying APIs uptime and availability.

Tyk can also notify you when a service goes down.

#### uptime_tests.disable

To disable uptime tests on this node, switch this value to `true`.

#### uptime_tests.poller_group

Change the default poller group of the uptime tests. 

#### uptime_tests.config

The configuration section for the uptime tests on this node.

#### uptime_tests.config.failure_trigger_sample_size

Set this value to `true` to have the node capture and record analytics data regarding the uptime tests.

The sample size to trigger a `HostUp` or `HostDown` event, e.g. a setting of `3` will require at least three failures to occur before the uptime test is triggered.

#### uptime_tests.config.time_wait

The amount of seconds between tests runs, all tests will run simultaneously, this value will set the periodicity between those tests. e.g. A value of `60` will run all uptime tests every 60 seconds.

#### uptime_tests.config.checker_pool_size

The goroutine pool size to keep idle for uptime tests, if you have many uptime tests running at a high periodicity, then make this value higher.

### local_session_cache

Tyk can cache some data locally, this can speed up lookup times on a single node and lower the number of connections and operations being done on Redis, it will however introduce a slight delay when updating or modifying keys as the cache must expire.

This does not affect rate limiting.

#### local_session_cache.disable_cached_session_state

By default sessions are set to cache, set this to true to stop Tyk from caching keys locally on the node.

### oauth_token_expire

Change the expiry time of OAuth token (in seconds).

### oauth_refresh_token_expire

Change the expiry time of refresh token, by default 14 days (in seconds).

### oauth_token_expired_retain_period

Specifies how long expired tokens are stored in Redis. The value is in seconds and the default is `0`. Using the default means expired tokens are never removed from Redis.

{{< note success >}}
**Note**  

This option is available from v2.6 onwards.
{{< /note >}}

### control_api_hostname

The hostname to bind the REST API to.

### control_api_port

This allows you to run the Gateway Control API on separate port, and protect it behind a firewall if needed.
Please make sure you follow these [instructions](/docs/planning-for-production/#change-your-control-port) when setting the control port.

{{< note success >}}
**Note**  

This option is available from v2.4 onwards.
{{< /note >}}


### enable_api_segregation

For additional security it is possible to have Tyk put its REST API on a separate hostname, this means that all calls to the `/api` functions must go via this hostname for this node otherwise they will 404. This is useful if you do not wish to expose the Tyk API to proxy API users.

{{< note success >}}
**Note**  

This has been deprecated. Enter a value for `control_api_hostname` instead.
{{< /note >}}


### hostname

The hostname to bind the node to. If set, all API traffic must go via this host name, otherwise it will raise a 404.

### enable_custom_domains

Set this value to `true` to enable this node to bind APIs to custom domains set in the API definition.

### proxy_enable_http2

This defaults to `true` for HTTP/2 upstream connections.

### enable_jsvm

This defaults to `false`. Set to `true` if you are using JSVM custom middleware or virtual endpoints.

### disable_virtual_path_blobs

If you do not wish for virtual path JavaScript code that is loaded from the dashboard to run on virtual endpoints in the node, set this value to `true` and the code will not be loaded into the VM when the API definition initialises. This is useful for systems where you want to avoid having third-party code run.

### experimental_process_org_off_thread

Setting this option to `true` will cause the organisation quota checker to handle quota limits off the main request pipeline, this can provide a speed boost in some situations. enabling this will cause quotas to be enforced by a "lock", in order to re-access the API once the quota has reset, the lock must be broken by sending one failed request, this will cause the sentinel to be disabled and allow traffic to pass normally again.

### enable_sentinel_rate_limiter

To enable, set to `true`. The sentinel-based rate limiter provides a smoother performance curve as rate-limit calculations happen off-thread, but a stricter time-out based cool-down for clients, i.e. when a throttling action is triggered, they are required to cool-down for the period of the rate limit.

Disabling the sentinel based limiter will make rate-limit calculations happen on-thread and therefore offers staggered cool-down and a smoother rate-limit experience for the client. I.e. the client can slow their connection throughput to regain entry into their rate limit, this is more of a "throttle" than a "block". The standard rate limiter offers similar performance as the sentinel-based limiter. This is disabled by default.

### enable_non_transactional_rate_limiter

This will be enabled by default. This is a new improved rate limiter that offers a significant improvement in performance by not using transactions on Redis rate-limit buckets. To go back to the old rate limiter, simply set this value to `false`.

### enforce_org_data_detail_logging

Set this value to true to make it possible to have detail logging occur on a per-organisation basis, org quotas must also be enabled for this to work. Setting `enable_detail_recording` in the org session object will enable or disable the logging method on the fly.

### enforce_org_quotas

Set this value to `true` to have the Tyk node enforce Organisation quotas on the APIs it is managing.

### enforce_org_data_age

Set to `true` to have Tyk enforce data age on analytics data sent to the Mongo DB purger. This must be accompanied by an additional parameter to an organisation session object called `data_expires` which is larger than `0`, this will define in seconds when analytics records for the inbound request will expire.

### use_sentry

Set this to `true` to enable the sentry logger, you must specify a sentry DSN under `sentry_code`.

### sentry_code

The Sentry-assigned DSN (a kind of URL endpoint) that Tyk can send log data to.

### suppress_redis_signal_reload

Tyk will auto-reload when a change is detected when using the Dashboard, this used to be done by the host-manager but is now directly integrated into the Gateway. For backwards compatibility, this behaviour can be suppressed by setting this value to `true`.

### optimisations_use_async_session_write

Set this value to `true` to have Tyk manage session data using a goroutine, this is quite safe and can significantly boost performance in HA environments where Tyk is installed on a machine with multiple cores.

{{< note success >}}
**Note**  

This has been deprecated. Removed from v3.0.3+ and 3.1.1+ onwards.
{{< /note >}}

### disable_dashboard_zeroconf

Disable the capability of the Gateway to "autodiscover" the Dashboard through heartbeat messages via Redis. The goal of zeroconf is auto-discovery, so you do not have to specify the Tyk Dashboard address in `tyk.conf`. In some specific cases, for example, when the Dashboard is bound to a public domain, not accessible inside an internal network, or similar, `disable_dashboard_zeroconf` can be set to true, in favour of directly specifying a Tyk Dashboard address.

### auth_override

Is used as part of the RPC / Hybrid back-end configuration when using Tyk Enterprise and isn't used anywhere else.

### use_redis_log

Enables the real-time Gateway log view in the Dashboard.

### management_node

If set to `true`, distributed rate limiter will be disabled for this node, and it will be excluded from rate limit calculation.

{{< note success >}}
**Note**  

If you set `db_app_conf_options.node_is_segmented` to `true` for multiple gateway nodes, you should ensure that `management_node` is set to `false`. This is to ensure visibility for the management node across all APIs.
{{< /note >}}

### proxy_ssl_insecure_skip_verify

This boolean option allows you to skip SSL checking for upstream APIs with self-signed certificates. The default setting is false.

{{< note success >}}
**Note**  

This option is available from v2.3.5 onwards.
{{< /note >}}

### proxy_default_timeout

This can specify a default timeout in seconds for upstream API requests.

{{< note success >}}
**Note**  

This option is available from v2.3.8 onwards.
{{< /note >}}


### log_level
You can now set a logging level (`log_level`). The following levels can be set:

* debug
* info
* warn
* error

If unset or left empty, it will default to `info`.

{{< note success >}}
**Note**  

This option is available from v2.4 onwards.
{{< /note >}}


### enable_key_logging

By default all key ids in logs are hidden. Turn it on if you want to see them for debugging reasons.

{{< note success >}}
**Note**  

This option is available from v2.5 onwards.
{{< /note >}}


### max_conn_time

This setting forces a DNS cache flush (in seconds). The default setting is `0`.

{{< note success >}}
**Note**  

This option is available from v2.5.2 onwards.
{{< /note >}}


### proxy_ssl_min_version

You use this setting to have Tyk only accept connections from TLS V1.0, 1.1 and 1.2 respectively.

You need to use the following values for this setting:

| TLS Version | Value to Use |
| ----------- | ------------ |
| 1.0         | 769          |
| 1.1         | 770          |
| 1.2         | 771          |
| 1.3         | 772          |

### proxy_ssl_ciphers

This allows you to add ssl ciphers which takes an array of strings as its value.

Each string must be one of the allowed cipher suites as defined at https://golang.org/pkg/crypto/tls/#pkg-constants

### proxy_ssl_disable_renegotiation

From v2.7.2, TLS renegotiation is now enabled by default. You can disable it by setting `proxy_ssl_disable_renegotiation` to `false`.

### disable_regexp_cache

If set to `true` this allows you to disable the regular expression cache. The default setting is `false`.

{{< note success >}}
**Note**  

This option is available from v2.7.0 onwards.
{{< /note >}}


### regexp_cache_expire

If you set `disable_regexp_cache` to false, you can use this setting to limit how long the regular expression cache is kept for in seconds. The default is `60` seconds. This must be a positive value. If you set to `0` this sets it uses the default value.

{{< note success >}}
**Note**  

This option is available from v2.7.0 onwards.
{{< /note >}}


### Key Value store

This section enables the usage of the KV capabilites to subsitute configuration
values.

```
{
  "kv": {
    "consul": {
      "address": "localhost:8025",
      "scheme": "http",
      "datacenter": "dc-1",
      "timeout": 30,
      "http_auth": {
        "username": "username",
        "password": "password"
      },
      "wait_time": 10,
      "token": "Token if available",
      "tls_config": {
        "address": "",
        "ca_path": "",
        "ca_file": "",
        "cert_file": "",
        "key_file": "",
        "insecure_skip_verify": false
      }
    },
    "vault": {
      "address": "http://localhost:1023",
      "agent_adress": "input if available",
      "max_retries": 3,
      "timeout": 30,
      "token": "token if available",
      "kv_version": 2
    }
  }
}
```

#### Consul

#### kv.consul.address

The address of the consul server

#### kv.consul.scheme

The URI scheme of the Consul server.

Valid values: `http`, `https`

#### kv.consul.datacenter

The datacenter the consul agent is running in.

Default : `dc1`

#### kv.consul.wait_time

This limits how long a Watch will block

Default: `0`

#### kv.consul.http.auth

HTTP Basic authentication to the Consul server.

##### kv.consul.http_auth.username

This is the username that is needed to perform the authentication to the server.

##### kv.consul.http_auth.password

This is the password that is needed to perform the authentication to the server.

#### kv.consul.token

Per request ACL token which will override the default agent's token

#### kv.consul.tls_config

##### kv.consul.tls_config.address

Optional. This is the adress of the consul server.

##### kv.consul.tls_config.ca_path

Optional. This is the path to the CA certificates used by the Consul server. It
defaults to the system certificates' path.

##### kv.consul.tls_config.cert_file

The path to the certificate file used by the Consul server.

##### kv.consul.tls_config.key_file

Path to the private cert file. If this is provided, then `kv.consul.tls_config.cert_file` must be set too.

##### kv.consul.tls_config.insecure_skip_verify

Disable TLS verification

#### Vault

#### kv.vault.address

Address of the vault server.

Defaults : `https://127.0.0.1:8200`. It can be overriden with `VAULT_ADDR` though

#### kv.vault.agent_address

Address of the local Vault agent

#### kv.vault.max_retries

Controls the maximum number of times to retry when an internal error occurs

Defaults: `2`.

#### kv.vault.max_retries

Controls the maximum number of times to retry when an internal error occurs

Defaults: `2`.

#### kv.vault.timeout

Timeout for HTTP client

#### kv.vault.token

Token to authenticate requests to the Vault server.

#### kv.vault.kv_version

KV version of Vault.

Defaults: `2`.


#### Secrets map

Values that are set in this map will be available for use to your app.
Please take a look at [KV store reference for usage](/docs/tyk-configuration-reference/kv-store/)
```
"secrets": {
    "key": "value",
    "yet_another_key": "yet_another_value",
}
```

{{< note success >}}
**Note**  

Please use Consul/Vault to store more sensitive data
{{< /note >}}


#### Environment store

Environment variables can also be used as a KV store. A value in the environment
as `SOME_VALUE` will be accessible as `env://SOME_VALUE`.

Please take a look at [KV store reference for usage](/docs/tyk-configuration-reference/kv-store/)

{{< note success >}}
**Note**  

Please use Consul/Vault to store more sensitive data
{{< /note >}}

### DNS caching

### DNS caching

This section enables the global configuration of the expireable dns records caching for gateway API endpoints. By design caching affects only http(s), ws(s) protocols apis and doesn't affect any plugin/middleware dns queries.

```
"dns_cache": {
    "enabled": true, //Turned off by default
    "ttl": 60, //Time in seconds before the record will be removed from cache
    "multiple_ips_handle_strategy": "random" //A strategy, which will be used when dns query will reply with more than 1 ip address per single host.
}
```

#### dns_cache.enabled

Valid values: `true`, `false`
Default value: `false`
Setting this value to `true` will enable caching of dns queries responses used for API endpoint's host names.
By default caching is disabled.

#### dns_cache.ttl

Units: seconds
Default value: `0`
This setting allows to specify duration in seconds before the record will be removed from cache after being added to it on first dns query resolution of API endpoints.
Setting ttl to `-1` prevents record from being expired and removed from cache on next check interval.

#### dns_cache.multiple_ips_handle_strategy

Valid values: `pick_first`, `random`, `no_cache`
A strategy, which will be used when dns query will reply with more than 1 ip address per single host.
As dns query response ip addresses can have changing order depending on dns server balancing strategy(eg: round robin, geographically dependent origin-ip ordering, etc) this option allows to not to limit connection to first host within cached response list or prevent response caching.

- `pick_first` will instruct gateway to connect to first ip in returned ips list and cache the response.
- `random` will instruct gateway to connect to random ip in returned ips list and cache the response.
- `no_cache` will instruct gateway to connect to first ip in returned ips list and fetch each addresses list without caching on each API endpoint dns query.

### hide_generator_header

By default, we set the `X-Generator` header to `tyk.io` when returning errors. You can set `hide_generator_header` to `true`to turn this header off.

### oauth_error_status_code

New in v2.9.2, you can now configure the OAuth error status code returned. If not set, it defaults to a 403 error.

### override_messages

New in 2.9.4, you can now override the default error code and or message returned by middleware. The following message IDs can be used to override the message and error codes:

#### `AuthToken` message IDs

* `auth.auth_field_missing`
* `auth.key_not_found`

#### `OIDC` message IDs

* `oauth.auth_field_missing`
* `oauth.auth_field_malformed`
* `oauth.key_not_found`
* `oauth.client_deleted`

#### Sample Override Message Setting

```{.json}
"override_messages": {
  "oauth.auth_field_missing" : {
    "code": 401,
    "message": "Token is not authorised"
  }
}
```

### ignore_endpoint_case

New in v2.9.4 you can now configure Tyk to ignore the case of any endpoints for APIs managed by Tyk. Setting this to `true` will override any [individual API](/docs/tyk-rest-api/api-definition-objects/other-root-objects/) and [Ignore](/docs/advanced-configuration/transform-traffic/endpoint-designer/#ignore), [Blacklist](/docs/advanced-configuration/transform-traffic/endpoint-designer/#blacklist) and [Whitelist](/docs/advanced-configuration/transform-traffic/endpoint-designer/#whitelist) plugin endpoint settings. 

### ssl_force_common_name_check

From v2.9.3 you can force the validation of the hostname against the common name by setting `ssl_force_common_name_check` to `true`.

### track_404_logs

From v3.0 you can log all the 404 errors happening if user tried to access Gateway with unknown listen path.
The log level used for these records is Error and the feature can be enabled by setting the `config track_404_logs` to `true` in the gateway's config file.

### ignore_canonical_mime_header_key

Added in v3.0.2. When enabled Tyk ignores the canonical format of the MIME header keys.

For example when a request header with a "my-header" key is injected using "global_headers", the upstream would typically get it as "My-Header", when this flag is enabled it will be sent as "my-header" instead.
 
Current support is limited to [JS plugins](https://tyk.io/docs/plugins/supported-languages/javascript-middleware/), [global header injection](https://tyk.io/docs/advanced-configuration/transform-traffic/request-headers/#injecting-and-removing-headers-globally), [virtual endpoint](https://tyk.io/docs/advanced-configuration/compose-apis/virtual-endpoints/) and [JQ transform header rewrites](https://tyk.io/docs/advanced-configuration/transform-traffic/jq-transformations/). This functionality doesn't affect headers that are sent by the HTTP client and the default formatting will apply for this case.


For technical details refer to the [CanonicalMIMEHeaderKey](https://golang.org/src/net/textproto/reader.go?h=CanonicalMIMEHeaderKey#L588) functionality in the Go documentation.
