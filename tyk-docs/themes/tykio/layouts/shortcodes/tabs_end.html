</div>
</div>


<style>
.code-tabs .nav-tabs {
    margin-bottom: 1em;
    padding-left: 0;
}

.code-tabs .nav-tabs li {
    display: inline;
    margin-right: 0em;
    opacity: 0.5;
    padding: 1em 2em;
}

.code-tabs .nav-tabs li.active {
    opacity: 1;
    border-bottom: 2px solid #8438FA;
    font-weight: bold;
}

.code-tabs .tab-pane {
    display: none;
}

.code-tabs .tab-pane.active {
    display: block;
}
</style>

<script>
var tabsBontainer = document.currentScript.previousElementSibling.previousElementSibling;

setTimeout(function(container){
  // Find parent heading ID (if exists)
  var parentHeadingId = '';
  var parentHeading = $(container).closest('div').prevAll('h1, h2, h3, h4, h5, h6').first();
  if (parentHeading.length > 0 && parentHeading.attr('id')) {
    parentHeadingId = parentHeading.attr('id');
  }
  
  // Create tab navigation items
  $(container).find('> .tab-content > .tab-pane').each(function(idx, item) {
    var navTabs = $(this.parentNode.parentNode).find('> .nav-tabs'),
        title = $(this).attr('title'),
        id = $(this).attr('id');
    
    // Store original ID for reference
    $(this).attr('data-original-id', id);
    
    // If parent heading has ID, modify this tab's ID to include it
    if (parentHeadingId) {
      var combinedId = parentHeadingId + '-' + id;
      $(this).attr('id', combinedId);
      navTabs.append('<li><a href="#' + combinedId + '">'+title+'</a></li');
    } else {
      navTabs.append('<li><a href="#' + id + '">'+title+'</a></li');
    }
  });

  // Check if URL has fragment and activate corresponding tab
  function activateTabFromHash() {
    var hash = window.location.hash.substr(1);
    if (hash) {
      // First try exact match (direct tab ID)
      var tabToActivate = $(container).find('> .tab-content > .tab-pane#' + hash);
      
      // If no exact match, try to match by original ID before it was combined with parent heading
      if (!tabToActivate.length) {
        $(container).find('> .tab-content > .tab-pane').each(function() {
          var originalId = $(this).attr('data-original-id');
          if (originalId && originalId === hash) {
            tabToActivate = $(this);
            return false; // Break the loop
          }
        });
      }
      
      // If still no match, check for parent-tab combined IDs in the URL hash
      if (!tabToActivate.length) {
        $(container).find('> .tab-content > .tab-pane').each(function() {
          var originalId = $(this).attr('data-original-id');
          if (originalId && hash.endsWith('-' + originalId)) {
            tabToActivate = $(this);
            return false; // Break the loop
          }
        });
      }
      
      // If we found a tab to activate
      if (tabToActivate.length) {
        var tabIndex = tabToActivate.index();
        var tabNav = $(container).find('> .nav-tabs > li').eq(tabIndex);
        
        // Deactivate current tabs
        $(container).find('> .nav-tabs > .active').removeClass('active');
        $(container).find('> .tab-content > .active').removeClass('active');
        
        // Activate selected tab
        tabNav.addClass('active');
        tabToActivate.addClass('active');
        return true;
      }
    }
    return false;
  }

  // If no tab is activated by URL hash, activate first tab
  if (!activateTabFromHash()) {
    $(container).find('> ul.nav-tabs').each(function() {
      $(this).find("li:first").addClass('active');
    });
    
    $(container).find('> .tab-content').each(function() {
      $(this).find("div:first").addClass('active');
    });
  }

  // Handle tab clicks - update URL and show tab
  $(container).find('> .nav-tabs a').click(function(e){
    var tab = $(this).parent(),
        tabIndex = tab.index(),
        tabPane = $(container).find('> .tab-content > .tab-pane').eq(tabIndex),
        tabId = tabPane.attr('id');
    
    // Use the current tab ID which already includes the parent heading ID if it exists
    var newHash = tabId;
    
    // Update URL without full page reload
    if (history.pushState && tabId) {
      history.pushState(null, null, '#' + newHash);
    } else {
      window.location.hash = newHash;
    }
    
    // Deactivate current tabs
    $(container).find('> .nav-tabs > .active').removeClass('active');
    $(container).find('> .tab-content > .active').removeClass('active');
    
    // Activate selected tab
    tab.addClass('active');
    tabPane.addClass('active');
    
    e.preventDefault();
  });

  // Handle browser back/forward navigation
  $(window).on('hashchange', function() {
    activateTabFromHash();
  });
}, 0, tabsBontainer);
</script>
